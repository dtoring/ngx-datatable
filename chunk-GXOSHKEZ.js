import{a as c}from"./chunk-RIKIP3VJ.js";import"./chunk-NKJLIICL.js";import{$b as P,Qa as f,Ra as a,Sa as m,Va as b,Wb as w,bb as r,ib as v,jb as l,lb as S,ra as h,va as d,za as p}from"./chunk-DTGLECY5.js";var M=()=>({name:"Name",sortable:!1}),_=()=>({name:"Gender",sortable:!1}),C=()=>({name:"Company",sortable:!1}),y=(n,i,z)=>[n,i,z],F=(()=>{let i=class i{constructor(t){this.serverResultsService=t,this.totalElements=0,this.cache={},this.cachePageSize=0,this.ColumnMode=w,this.isLoading=0,this.pageNumber=0}setPage(t){this.pageNumber=t.offset;let o=t.offset*t.pageSize,e={pageNumber:Math.floor(o/t.pageSize),size:t.pageSize,totalElements:0,totalPages:0};this.cachePageSize!==e.size&&(this.cachePageSize=e.size,this.cache={}),!this.cache[e.pageNumber]&&(this.cache[e.pageNumber]=!0,this.isLoading++,this.serverResultsService.getResults(e).subscribe(s=>{this.totalElements=s.page.totalElements,this.rows||(this.rows=new Array(this.totalElements||0));let g=s.page.pageNumber*s.page.size,u=[...this.rows];u.splice(g,s.page.size,...s.data),this.rows=u,this.isLoading--}))}};i.\u0275fac=function(o){return new(o||i)(d(c))},i.\u0275cmp=p({type:i,selectors:[["virtual-paging-demo"]],features:[v([c])],decls:9,vars:20,consts:[["href","https://github.com/swimlane/ngx-datatable/blob/master/src/app/paging/paging-virtual.component.ts","target","_blank"],[1,"material",3,"page","rows","columns","columnMode","headerHeight","loadingIndicator","ghostLoadingIndicator","scrollbarV","footerHeight","rowHeight","externalPaging","externalSorting","count","offset"],["loading-indicator","",1,"custom-loading-indicator"]],template:function(o,e){o&1&&(a(0,"div")(1,"h3"),r(2," Virtual Server-side Paging "),a(3,"small")(4,"a",0),r(5," Source "),m()()(),a(6,"ngx-datatable",1),b("page",function(g){return e.setPage(g)}),a(7,"div",2),r(8,"loading..."),m()()()),o&2&&(h(6),f("rows",e.rows)("columns",S(16,y,l(13,M),l(14,_),l(15,C)))("columnMode",e.ColumnMode.force)("headerHeight",50)("loadingIndicator",e.isLoading>0)("ghostLoadingIndicator",e.isLoading>0)("scrollbarV",!0)("footerHeight",50)("rowHeight",50)("externalPaging",!0)("externalSorting",!0)("count",e.totalElements)("offset",e.pageNumber))},dependencies:[P],styles:[".custom-loading-indicator[_ngcontent-%COMP%]{position:sticky;top:0;height:50px;text-align:center}"]});let n=i;return n})();export{F as VirtualPagingComponent};
