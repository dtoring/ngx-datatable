import{a as L}from"./chunk-NKJLIICL.js";import{$b as C,D as g,O as p,Qa as v,Ra as r,Sa as l,Va as b,Wb as y,bb as c,ia as u,ib as H,jb as s,lb as S,m,q as d,ra as f,va as a,za as w}from"./chunk-DTGLECY5.js";var D=()=>({name:"Name"}),_=()=>({name:"Gender"}),R=()=>({name:"Company"}),j=(n,e,M)=>[n,e,M],x=L,I=(()=>{let e=class e{getResults(o,t){return m(x.slice(o,o+t)).pipe(g(new Date(Date.now()+500)),d(i=>({data:i})))}};e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=p({token:e,factory:e.\u0275fac});let n=e;return n})(),k=(()=>{let e=class e{constructor(o,t){this.serverResultsService=o,this.el=t,this.headerHeight=50,this.rowHeight=50,this.pageLimit=10,this.rows=[],this.ColumnMode=y}ngOnInit(){this.onScroll(0)}onScroll(o){let t=this.el.nativeElement.getBoundingClientRect().height-this.headerHeight;if(!this.isLoading&&o+t>=this.rows.length*this.rowHeight){let i=this.pageLimit;if(this.rows.length===0){let h=Math.ceil(t/this.rowHeight);i=Math.max(h,this.pageLimit)}this.loadPage(i)}}loadPage(o){this.isLoading=!0,this.serverResultsService.getResults(this.rows.length,o).subscribe(t=>{let i=[...this.rows,...t.data];this.rows=i,this.isLoading=!1})}};e.\u0275fac=function(t){return new(t||e)(a(I),a(u))},e.\u0275cmp=w({type:e,selectors:[["server-scrolling-demo"]],features:[H([I])],decls:7,vars:15,consts:[["href","https://github.com/swimlane/ngx-datatable/blob/master/src/app/paging/scrolling-server.component.ts","target","_blank"],[1,"material","server-scrolling-demo",3,"scroll","rows","columns","columnMode","headerHeight","rowHeight","loadingIndicator","ghostLoadingIndicator","scrollbarV"]],template:function(t,i){t&1&&(r(0,"div")(1,"h3"),c(2," Server-side Scrolling "),r(3,"small")(4,"a",0),c(5," Source "),l()()(),r(6,"ngx-datatable",1),b("scroll",function(F){return i.onScroll(F.offsetY)}),l()()),t&2&&(f(6),v("rows",i.rows)("columns",S(11,j,s(8,D),s(9,_),s(10,R)))("columnMode",i.ColumnMode.force)("headerHeight",i.headerHeight)("rowHeight",i.rowHeight)("loadingIndicator",i.isLoading)("ghostLoadingIndicator",i.isLoading)("scrollbarV",!0))},dependencies:[C],styles:[".server-scrolling-demo[_ngcontent-%COMP%]{height:calc(100vh - 110px)}  .progress-linear{position:fixed!important;bottom:0}"]});let n=e;return n})();export{I as MockServerResultsService,k as ServerScrollingComponent};
