import{a as F}from"./chunk-JARBSGRK.js";import"./chunk-HN6DGRRP.js";import{$b as B,Ba as v,Ka as C,Mb as z,Nb as L,Pb as Q,Qa as d,Ra as u,Rb as W,S as E,Sa as x,Ta as H,Ua as w,Va as y,Wa as b,Wb as j,X as _,Xa as R,Xb as A,Y as f,Ya as I,Za as M,ab as O,bb as S,db as P,gb as k,hb as h,ra as s,za as V}from"./chunk-DTGLECY5.js";var Y=["myTable"];function q(l,r){if(l&1){let o=w();u(0,"div",13)(1,"a",14),y("click",function(){let t=_(o).group,a=b();return f(a.toggleExpandGroup(t))}),u(2,"b"),S(3),x()()()}if(l&2){let o=r.group,i=r.expanded;s(),O("datatable-icon-right",!i)("datatable-icon-down",i),s(2),P("Age: ",o?o.value[0].age:"")}}function N(l,r){if(l&1){let o=w();u(0,"label",15)(1,"input",16),y("change",function(t){let a=_(o),e=a.rowIndex,p=a.row,c=a.group,m=b();return f(m.checkGroup(t,p,e,c))}),x()(),u(2,"label",15)(3,"input",17),y("change",function(t){let a=_(o),e=a.rowIndex,p=a.row,c=a.group,m=b();return f(m.checkGroup(t,p,e,c))}),x()(),u(4,"label",15)(5,"input",18),y("change",function(t){let a=_(o),e=a.rowIndex,p=a.row,c=a.group,m=b();return f(m.checkGroup(t,p,e,c))}),x()()}if(l&2){let o=r.rowIndex,i=r.row;d("for",h("ep1",o)),s(),d("id",h("ep1",o))("name",k(o))("checked",i.exppayyes===1),C("aria-label","ex pay1"+o),s(),d("for",h("ep2",o)),s(),d("id",h("ep2",o))("name",k(o))("checked",i.exppayno===1),C("aria-label","ex pay2"+o),s(),d("for",h("ep3",o)),s(),d("id",h("ep3",o))("name",k(o))("checked",i.exppaypending===1),C("aria-label","ex pay3"+o)}}function J(l,r){if(l&1){let o=w();u(0,"input",19),y("blur",function(t){let a=_(o).rowIndex,e=b();return f(e.updateValue(t,"comment",a))}),x()}if(l&2){let o=r.value;d("value",o)}}var te=(()=>{let r=class r{constructor(){this.editing={},this.rows=[],this.ColumnMode=j,this.SelectionType=A,this.dataService=E(F),this.dataService.load("forRowGrouping.json").subscribe(i=>{this.rows=i})}checkGroup(i,t,a,e){let p="Pending",c=!0,m=i.target;if(t.exppayyes=0,t.exppayno=0,t.exppaypending=0,m.checked&&(m.value==="0"?t.exppayyes=1:m.value==="1"?t.exppayno=1:m.value==="2"&&(t.exppaypending=1)),e.length===2){if(["Calculated","Funder"].indexOf(e[0].source)>-1&&["Calculated","Funder"].indexOf(e[1].source)>-1&&e[0].startdate===e[1].startdate&&e[0].enddate===e[1].enddate)for(let n=0;n<e.length;n++)e[n].source!==t.source&&m.value==="0"&&(e[n].exppayyes=0,e[n].exppaypending=0,e[n].exppayno=1),e[n].exppayyes===0&&e[n].exppayno===0&&e[n].exppaypending===0&&(c=!1),console.log("expectedPaymentDealtWith",c)}else for(let n=0;n<e.length;n++)e[n].exppayyes===0&&e[n].exppayno===0&&e[n].exppaypending===0&&(c=!1),console.log("expectedPaymentDealtWith",c);if(e.filter(n=>n.exppaypending===1).length===0&&e.filter(n=>n.exppaypending===0&&n.exppayyes===0&&n.exppayno===0).length===0){console.log("expected payment dealt with");let n=e.filter(g=>g.exppayyes===1).length,G=e.filter(g=>g.exppayyes===1&&g.source==="Funder").length,T=e.filter(g=>g.exppayyes===1&&g.source==="Calculated").length,D=e.filter(g=>g.exppayyes===1&&g.source==="Manual").length;console.log("numberOfExpPayYes",n),console.log("numberOfSourceFunder",G),console.log("numberOfSourceCalculated",T),console.log("numberOfSourceManual",D),n>0&&(n===G?p="Funder Selected":n===T?p="Calculated Selected":n===D?p="Manual Selected":p="Hybrid Selected")}e[0].groupstatus=p}updateValue(i,t,a){this.editing[a+"-"+t]=!1,this.rows[a][t]=i.target.value,this.rows=[...this.rows]}toggleExpandGroup(i){console.log("Toggled Expand Group!",i),this.table.groupHeader.toggleExpandGroup(i)}onDetailToggle(i){console.log("Detail Toggled",i)}};r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=V({type:r,selectors:[["row-grouping-demo"]],viewQuery:function(t,a){if(t&1&&R(Y,5),t&2){let e;I(e=M())&&(a.table=e.first)}},decls:19,vars:17,consts:[["myTable",""],["myGroupHeader",""],["href","https://github.com/swimlane/ngx-datatable/blob/master/src/app/basic/row-grouping.component.ts","target","_blank"],[1,"material","expandable",3,"rows","groupRowsBy","columnMode","scrollbarH","headerHeight","footerHeight","rowHeight","limit","groupExpansionDefault","selectionType"],[3,"toggle","rowHeight","checkboxable"],["ngx-datatable-group-header-template",""],["name","Exp. Pay.","prop","","editable","true",3,"headerCheckboxable","checkboxable","frozenLeft","sortable"],["ngx-datatable-cell-template",""],["name","Source","prop","source","editable","false",3,"frozenLeft"],["name","Name","prop","name","editable","true"],["name","Gender","prop","gender"],["name","Age","prop","age"],["name","Comment","prop","comment"],[2,"padding-left","5px","height","100%","display","flex","align-items","center"],["href","#","title","Expand/Collapse Group",3,"click"],[1,"datatable-checkbox",3,"for"],["type","checkbox","value","0",1,"expectedpayment",3,"change","id","name","checked"],["type","checkbox","value","1",1,"expectedpayment2",3,"change","id","name","checked"],["type","checkbox","value","2",1,"expectedpayment3",3,"change","id","name","checked"],["type","text","name","comment",3,"blur","value"]],template:function(t,a){if(t&1){let e=w();u(0,"div")(1,"h3"),S(2," Row Grouping "),u(3,"small")(4,"a",2),S(5," Source "),x()()(),u(6,"ngx-datatable",3,0)(8,"ngx-datatable-group-header",4,1),y("toggle",function(c){return _(e),f(a.onDetailToggle(c))}),v(10,q,4,5,"ng-template",5),x(),u(11,"ngx-datatable-column",6),v(12,N,6,24,"ng-template",7),x(),H(13,"ngx-datatable-column",8)(14,"ngx-datatable-column",9)(15,"ngx-datatable-column",10)(16,"ngx-datatable-column",11),u(17,"ngx-datatable-column",12),v(18,J,1,1,"ng-template",7),x()()()}t&2&&(s(6),d("rows",a.rows)("groupRowsBy","age")("columnMode",a.ColumnMode.force)("scrollbarH",!0)("headerHeight",50)("footerHeight",50)("rowHeight",40)("limit",4)("groupExpansionDefault",!0)("selectionType",a.SelectionType.checkbox),s(2),d("rowHeight",34)("checkboxable",!0),s(3),d("headerCheckboxable",!0)("checkboxable",!0)("frozenLeft",!0)("sortable",!1),s(2),d("frozenLeft",!0))},dependencies:[B,L,z,W,Q],encapsulation:2});let l=r;return l})();export{te as RowGroupingComponent};
